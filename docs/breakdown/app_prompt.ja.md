# アプリケーションプロンプト

---

**BreakdownPromptの利用**
BreakdownPromptはBreakdownアプリケーションの中核的なモジュールであり、AI開発支援のためのプロンプト生成を担います。ユーザーの入力やプロジェクトの状態に応じて、最適なプロンプトを自動的に選択・生成し、AIエージェントが理解しやすい指示文を提供します。

**公式ドキュメント**
最新の使い方や型定義、APIの詳細は https://jsr.io/@tettuan/breakdownprompt およびGitHubリポジトリのREADMEを参照してください。常に公式ドキュメントを確認することで、最新の仕様や推奨される利用方法を把握できます。

**役割・責務**
BreakdownPromptの責務は「特定されたプロンプトファイルに対する変数置換・スキーマ参照・プロンプト生成」に限定されます。どのプロンプトファイルを使うかの特定やパス解決は path.ja.md や app_factory.ja.md の責務、設定値の管理は app_config.ja.md の責務です。

**スコープ**
本モジュールはプロンプトファイルの内容をもとに、与えられた変数やスキーマ情報を埋め込んだプロンプトを生成することに特化します。ファイル特定・パス解決・設定管理は他モジュールが担い、AIによる変換やMarkdown解析、スキーマ検証も対象外です。

**処理概要**
コマンドライン引数や設定ファイルから必要なパラメータを取得し、プロンプトファイルの選択・変数置換・スキーマ情報の埋め込みを経て、最終的なプロンプトを生成・出力します。エラー時は適切なフィードバックも行います。

**設定例**
app_configファイルで baseDir や debug オプションを指定することで、プロンプトの格納ディレクトリやデバッグモードの有効化など、柔軟な運用が可能です。

```json
{
  "app_prompt": {
    "baseDir": "./.agent/breakdown/prompts/",
    "debug": false
  }
}
```

**デバッグ方法**
デバッグ時はLOG_LEVEL=debugの環境変数を設定するか、コード内でdebug:trueを指定することで、詳細なログ出力や挙動の確認が可能です。問題発生時の原因特定に役立ちます。

---

詳細なパスや変数の扱い、命名規則などは path.ja.md を参照してください。
