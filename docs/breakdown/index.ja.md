# Breakdown 仕様書インデックス

このディレクトリには Breakdown ツールの仕様書が含まれています。これらの仕様書は開発用の詳細とは別に、人間がまとめたユースケースや要求事項を元にした仕様書です。

## 目的・背景

Breakdown は Deno で実装された OSS ツールで、プロジェクト管理のための階層的なタスク分解をサポートします。この仕様書は、ツールの設計、機能、使用方法を明確に定義することを目的としています。

## 使用するJSRパッケージ

Breakdown は以下のJSRパッケージを使用して実装されています：

1. [@tettuan/breakdownconfig](https://jsr.io/@tettuan/breakdownconfig) - 設定管理
   - アプリケーションとユーザー設定の管理
   - 作業ディレクトリの設定
   - プロンプトとスキーマのディレクトリ設定

2. [@tettuan/breakdownparams](https://jsr.io/@tettuan/breakdownparams) - パラメータ処理
   - コマンドライン引数の解析
   - オプションの処理
   - パラメータのバリデーション

3. [@tettuan/breakdownprompt](https://jsr.io/@tettuan/breakdownprompt) - プロンプト処理
   - プロンプトファイルの読み込み
   - 変数置換
   - プロンプトの生成

4. [@tettuan/breakdownlogger](https://jsr.io/@tettuan/breakdownlogger) - ロギング機能
   - デバッグ情報の出力
   - エラー処理とログ記録

## 仕様の概略

Breakdown ツールは、プロジェクト、イシュー、タスクという3つの階層でタスク管理を行います。コマンドラインインターフェース(CLI)を通じて、これらの階層間の変換や要約、欠陥分析などの機能を提供します。

設定ファイルやプロンプト、スキーマを利用して柔軟な動作を実現し、作業ディレクトリ内でのファイル管理を行います。

## 目次

### 基本仕様
0. [基本実装](./breakdown.ja.md) - コマンド実行の基本フロー
   - JSRパッケージの利用方法と初期化
   - コマンドライン引数の解析フロー
   - 設定ファイルの読み込みと処理
   - エラーハンドリングの基本方針

1. [アプリケーション設定](./app_config.ja.md) - 設定ファイルの読み込みと作業ディレクトリの管理
   - breakdownconfigモジュールの使用方法
   - アプリケーション設定とユーザー設定の階層構造
   - 作業ディレクトリとプロンプトディレクトリの設定
   - スキーマディレクトリの構成管理

2. [基本コマンドと引数](./options.ja.md) - コマンドライン引数の仕様と使用方法
   - breakdownparamsモジュールの実装
   - NoParamsResult、SingleParamResult、DoubleParamsResultの処理
   - コマンドライン引数のパース処理
   - ヘルプとバージョン情報の表示

3. [要素構築](./app_factory.ja.md) - スキーマとプロンプトの要素構築方法
   - PromptParamsFactoryの責務と実装
   - パラメータ構築のルール
   - ファイルパスとディレクトリパスの生成
   - バリデーションと変換処理

3-1. [構築ルール](./path.ja.md) - 設定とパラメータに応じたプロンプト引数の構築ルール
    - パス階層の基本構造
    - 入力ファイルのパス解決ルール
    - 出力ファイルのパス生成ルール
    - ハッシュ値生成の仕様とファイル名規則

3-2. [Schema配置](./app_schema.ja.md) - Schema配置の基本ルール
    - スキーマファイルの構造と配置
    - スキーマの命名規則
    - コマンドとレイヤーの組み合わせルール
    - JSONスキーマの定義方法

4. [アプリケーションプロンプト](./app_prompt.ja.md) - プロンプトファイルの置換処理と使用方法
   - breakdownpromptモジュールの利用
   - プロンプトマネージャーの設定と初期化
   - 変数置換の仕様と処理
   - デバッグモードの設定と利用

5. [テスト設定](./test/config.md) - テストディレクトリの永続性仕様
   - テストデータの永続化ルール
   - フィクスチャーの配置と管理
   - テスト環境の分離方針
   - 一時ファイルの扱い

### 開発者向けドキュメント
6. [モジュール構成](./module.ja.md) - プロジェクトの構造とモジュール設計
   - プロジェクト構造とディレクトリ構成
   - 依存関係管理とJSRパッケージの利用
   - インターフェース定義とエラー処理
   - コーディング規約とベストプラクティス

7. [Denoベストプラクティス](./deno.ja.md) - Denoアプリケーションの開発ガイドライン
   - JSRパッケージの利用と公開
   - 依存関係の管理
   - テストとデバッグ
   - セキュリティとパフォーマンス

### 実装詳細
8. [CLIインターフェース](./cli.ja.md) - コマンドライン引数の詳細仕様
   - 基本構文と引数
   - オプション
   - 標準入出力の扱い
   - エラー処理

9. [ロギング](./logging.ja.md) - ロギング機能の仕様
   - ログレベルと制御
   - 出力フォーマット
   - デバッグ方法
   - テストでのロギング

10. [テスト仕様](./testing.ja.md) - テストの実装ガイドライン
    - テストディレクトリ構造
    - テスト実行手順
    - カバレッジ要件
    - デバッグとエラー処理

これらの仕様書は、Breakdown ツールの開発者やユーザーが機能を理解し、適切に利用するための参考資料として提供されています。