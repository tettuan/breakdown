# プロジェクト: Breakdown全体のドメイン駆動設計と全域性（Totality）の融合完成

実装方針:
現在の`lib/`配下の実装をドメイン駆動設計と全域性（Totality）による設計で、大幅にリファクタリングする。ドメイン領域の明確な理解に基づき、型安全性を強化して、骨格が通った芯の強いコード設計を実現する。

`Totality` について、必ず `docs/breakdown/overview/totality.ja.md` を参照すること。
ドメイン情報は、 `docs/breakdown/domain_core/domain_boundaries_flow.ja.md` および `docs/breakdown/domain_core/*` を必ず読むこと。

テスト方針:
テストに関しては `docs/tests/testing.ja.md` を読むこと。

仕様:
他の`docs/*`資料は、適宜実装ファイルを変更するタイミングで読むこと。

## 実施内容

1. 資料を読んで、ドメイン設計と Totality を理解する。
2. 理解した結果や調査した結果を `tmp/<branch_name>/` 配下に作成する。
3. 各実装を調べ、修正が必要なファイルをリスト化する。 
4. リストに基づき、実装をドメイン設計とTotalityに基づいて完成させる
5. 変更した実装に合わせてテストファイルを改修する
6. `deno test  <task>` で、作成したファイルをテストする （allowフラグつけて）


### 全ての変更が完了した後

1. `deno task ci --single-file` を通して、passするまでテストを完成させる

## 完了条件

1. ドメイン駆動設計とTotalityに基づいた改修が完了した
2. `deno task ci` がエラー0件で通った


**テストは実施しなくて良い**

# タスクの進め方

- Git:
  - 現在のGitブランチが適切か判断する (see @instructions/git-workflow.md)
  - 作成が必要なら Git ブランチを作成し、移動する
- サイクル: 仕様把握 → 調査 → 計画・設計 → 実行 → 記録・検証 → 学習 → 仕様把握へ戻る
- アサイン: サイクル段階に応じて、メンバーの役割を変更し最適アサイン。常時フル稼働を目指す。

### 進捗更新

- 進捗させるべきタスクは `tmp/totality-prompt-variables-20250629-1430/tasks.md` に書き出し、完了マークをつけたりしながら進めてください。
- すべてが完了したら、`tmp/totality-prompt-variables-20250629-1430/completed.md` に完了したレポートを記録してください。

# 作業開始指示

まずチームを立ち上げます。
チーム全体のパフォーマンスが重要です。
ワーカープールマネージャーを活躍させ、部下であるゴルーチンをフル稼働させてください。
今なにをすべきか（タスク分割や、状況整理、要件定義）について、ワーカープールマネージャーが把握していることが重要です。
ワーカープールマネージャーから、今やる詳細タスクへ分割し、部下ゴルーチンへ割り当てさせてください。

プロジェクトの成功を祈ります。開始してください。
